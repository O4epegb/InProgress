$(document).ready(function(){function e(e){a.append(Mustache.render(r,e))}var a=$(".orders"),t=$("#age"),n=$("#name"),r=$("#order-template").html();$.ajax({type:"GET",url:"http://rest.learncode.academy/api/omg/wtf",success:function(a){$.each(a,function(a,t){e(t)})},error:function(){alert("error loading orders")}}),$(".add-order").on("click",function(){var a={name:n.val(),age:t.val()};$.ajax({type:"POST",url:"http://rest.learncode.academy/api/omg/wtf",data:a,success:function(a){e(a)},error:function(){alert("error saving order")}})}),a.delegate(".remove-item","click",function(){var e=$(this).closest("li");$.ajax({type:"DELETE",url:"http://rest.learncode.academy/api/omg/wtf/"+$(this).attr("data-id"),success:function(){e.fadeOut(200,function(){$(this).remove()})}})}),a.delegate(".edit-order","click",function(){var e=$(this).closest("li");e.find("input.name").val(e.find("span.name").html()),e.find("input.age").val(e.find("span.age").html()),e.addClass("edit")}),a.delegate(".cancel-edit","click",function(){$(this).closest("li").removeClass("edit")}),a.delegate(".save-edit","click",function(){var e=$(this).closest("li"),a={name:e.find("input.name").val(),age:e.find("input.age").val()};$.ajax({type:"PUT",url:"http://rest.learncode.academy/api/omg/wtf/"+e.attr("data-id"),data:a,success:function(t){e.find("span.name").html(a.name),e.find("span.age").html(a.age),e.removeClass("edit")},error:function(){alert("error saving order")}})})});